<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Un package per il debugging in Java &#8211; Computer Programming</title>
<meta name="description" content="Il debug e le asserzioni,publicato su MokaByte Numero 36,Dicembre 1999,di Massimo Caliman e Nicola Merello">
<meta name="keywords" content="Java, Debug, Mokabyte">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://mcaliman.github.io/images/so-simple-sample-image-5.jpg">

<meta name="twitter:title" content="Un package per il debugging in Java">
<meta name="twitter:description" content="Il debug e le asserzioni,publicato su MokaByte Numero 36,Dicembre 1999,di Massimo Caliman e Nicola Merello">
<meta name="twitter:creator" content="@mcaliman">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Un package per il debugging in Java">
<meta property="og:description" content="Il debug e le asserzioni,publicato su MokaByte Numero 36,Dicembre 1999,di Massimo Caliman e Nicola Merello">
<meta property="og:url" content="http://mcaliman.github.io/articles/mokabyte-debug/">
<meta property="og:site_name" content="Computer Programming">





<link rel="canonical" href="http://mcaliman.github.io/articles/mokabyte-debug/">
<link href="http://mcaliman.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Computer Programming Feed">
<link rel="author" href="https://plus.google.com/+MassimoCaliman?rel=author">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://mcaliman.github.io/assets/css/main.min.css">
<!-- Webfonts -->
<script src="//use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://mcaliman.github.io/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://mcaliman.github.io/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://mcaliman.github.io/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://mcaliman.github.io/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://mcaliman.github.io/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://mcaliman.github.io/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://mcaliman.github.io/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
	        
			<li>
				
					<a href="http://mcaliman.github.io/">Home</a>
				 
			</li>
	        
			<li>
				
					<a href="http://mcaliman.github.io/about/">About</a>
				 
			</li>
	        
			<li>
				
					<a href="http://mcaliman.github.io/articles/">Articles</a>
				 
			</li>
	        
			<li>
				
					<a href="http://mcaliman.github.io/legal/">Legal</a>
				 
			</li>
	        
	        <li><a href="http://mcaliman.github.io/feed.xml" title="Atom/RSS feed"><i class="icon-rss"></i> Feed</a></li>
	        <li class="dosearch"><i class="icon-search"></i> Search</li>
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<div class="search-wrapper">
	<div class="search-form">
		<input type="text" class="search-field" placeholder="Search...">
		<i class="icon-remove-sign icon-2x"></i>
		<ul class="search-results post-list"></ul><!-- /.search-results -->
	</div><!-- /.search-form -->
</div><!-- ./search-wrapper -->

<header class="masthead">
	
</header><!-- /.masthead -->



<div id="main" role="main">
  <article class="hentry">
    <img src="http://mcaliman.github.io/images/so-simple-sample-image-5.jpg" class="entry-feature-image" alt="Un package per il debugging in Java" style="margin-top:0;"><p class="image-credit">Photo Credit: <a href="http://mademistakes.com">Michael Rose</a>
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"><a href="http://mcaliman.github.io/tags/#Java" title="Pages tagged Java">Java</a>&nbsp;&bull;&nbsp;<a href="http://mcaliman.github.io/tags/#Debug" title="Pages tagged Debug">Debug</a>&nbsp;&bull;&nbsp;<a href="http://mcaliman.github.io/tags/#Mokabyte" title="Pages tagged Mokabyte">Mokabyte</a></span>
        
          <h1 class="entry-title">Un package per il debugging in Java</h1>
        
      </header>
      <footer class="entry-meta">
        <img src="http://mcaliman.github.io/images/bio-photo.jpg" alt="Massimo Caliman photo" class="author-photo">
        <span class="author vcard">By <span class="fn"><a href="http://mcaliman.github.io/about/" title="About Massimo Caliman">Massimo Caliman</a></span></span>
        <span class="entry-date date published"><time datetime="1999-12-30T23:45:33+01:00"><i class="icon-calendar-empty"></i> December 30, 1999</time></span>
        
        
        <span><a href="http://mcaliman.github.io/articles/mokabyte-debug/" rel="bookmark" title="Un package per il debugging in Java"><i class="icon-link"></i> Permalink</a></span>
        
      </footer>
      <div class="entry-content">
        <p>Pubblicato su <strong>MokaByte Numero 36 Dicembre 1999,di Massimo Caliman e Nicola Merello</strong>.
Questo articolo vuole mostrare come sia possibile creare un sistema di package che faciliti il debugging
di programmi scritti in Java.</p>

<p>Oltre ad una esprerienza concreta (e’ disponibile il nostro package completo di tutti i sorgenti nonche’
i relativi file di documentazione in html generati con javadoc ) vuole essere un punto di partenza per
realizzare qualcosa di personalizzato,tagliato su misura.</p>

<h1 id="premessa">Premessa</h1>
<p>Venendo da un’esperienza di C/C++ una delle prime cose di cui abbiamo sentito la mancanza in Java sono
state le asserzioni: comode, pratiche e quando non ti servono te ne puoi sempre sbarazzare inserendo negli
appositi header delle direttive del precompilatore. Il nostro scopo era quello di riuscire a creare una
situazione analoga anche in Java rispettando pero’ i seguenti vincoli:</p>

<ul>
  <li>Il codice doveva rimanere 100% PureJava. </li>
  <li>La possibilita’ di gestire piu’ livelli di debug in modo semplice e diretto, in modo da poterli utilizzare in maniera autonoma gli uni dagli altri. </li>
  <li>Poter disabilitare/abilitare il debugger senza effettuare onerose ricerche all’interno del nostro codice per commentare tutte le chiamate di debug.</li>
</ul>

<h1 id="il-problema">Il problema</h1>
<p>A Java non manca niente per poter creare (come del resto avevamo fatto nel C++) delle classi Assert che
possano ricoprire in modo abbastanza completo tale ruolo, fino a che pero’ non si presenta il problema di
eliminarle dal codice perche’ magari e’ stato ritenuto maturo e pronto per essere rilasciato come release
finale (su questo argomento ci sarebbe da aprire un acceso dibattito, ma lasciamo stare). In questi casi o si
abbandona lo standard e ci si appoggia a qualche precompilatore che svolga lo stesso ruolo come nel C (metodo
da noi subito scartato, in quanto non rispettava le linee di progetto che ci eravamo imposti), oppure ci si
arma di sana pazienza e si esegue una ricerca di tutte le chiamate alla classe Assert rimovendole o meglio
commentandole. Se poi mettiamo il caso che sia necessario rimettere mano al nostro codice per effettuare delle
modifiche (cosa del tutto normale e frequente), ecco che dobbiamo nuovamente andare a inserire le asserzioni
eliminate precedentemente (se ci va bene dobbiamo solo de-commentarle). Tutto questo costa fatica, ma
soprattutto tempo, e si sa che nello sviluppo di software il tempo e’ molto prezioso (del resto dove non lo e’
?). E’ da questa premessa che abbiamo cominciato a cercare una soluzione che permetta di gestire tale
situazione nella maniera piu’ pulita possibile. L’idea si e’ basata su una tecnica accennata da Bruce Eckel nel
suo libro Thinking in Java (disponibile gratuitamente al sito http://www.BruceEckel.com), precisamente nel
capitolo 5.</p>

<h1 id="un-primo-approccio">Un primo approccio</h1>
<p>In pratica il gioco ruota attorno a due package simmetrici (nella definizione ma non nell’implementazione)
che all’interno definiscono le stesse classi con gli stessi metodi. Per motivi prestazionali tutti i metodi
sono definiti static in maniera tale che le chiamate siano eseguite tramite la classe e non un’istanza di
questa.Vediamo un esempio per chiarire meglio il concetto. Definiamo due package, uno lo chiamiamo debugger e
l’altro nodebugger. Gia’ dai due nomi si dovrebbe capire quali siano le loro intenzioni:</p>

<div class="highlight"><pre><code class="java"><span class="c1">//LISTATO 1: </span>
<span class="kn">package</span> <span class="n">debugger</span><span class="o">;</span> 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Debug</span> <span class="o">{</span> 
   <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">print</span><span class="o">(</span><span class="n">String</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">msg</span><span class="o">);</span> 
   <span class="o">}</span> 
<span class="o">}</span> 
<span class="c1">//LISTATO 2: </span>
<span class="kn">package</span> <span class="n">nodebugger</span><span class="o">;</span> 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Debug</span> <span class="o">{</span> 
   <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">print</span><span class="o">(</span><span class="n">String</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span> 
      <span class="cm">/*do nothing*/</span> 
   <span class="o">}</span> 
<span class="o">}</span></code></pre></div>

<p>Come si puo’ vedere dal listato 1 nel package debugger e’ definita una classe Debug analoga a quella del
package nodebugger ma l’implementazione e’ diversa, anzi nel package nodebugger il membro print(String msg) e’
addirittura vuoto. Questo ci permette di utilizzare la classe debugger.Debug nel nostro codice sorgente
richiamandone il metodo print qualora ci serva per stampare messaggi di debug, successivamente per disabilitare
tale opzione bastera’ modificare l’import della classe con quella nodebugger.Debug e tutte le chiamate alla
nostra print non verranno piu’ risolte (o meglio un certo overhead probabilmente continuera’ ad esserci in
quanto la chiamata verra’ comunque eseguita, ma sara’ sicuramente molto inferiore rispetto al tempo di
esecuzione della stampa sullo standard output che faceva la precedente funzione print. In pratica rimane solo
la chiamata nello stack, che forse un compilatore di bytecode intelligente potrebbe eliminare. In ogni caso
questo overhead e’ nella maggior parte dei casi sicuramente trascurabile). Logico che poi le varie funzioni di
debug non si fermano solo alla semplice stampa di un messaggio sullo standard output/error ma ve ne saranno
altre per molteplici scopi, dalle semplici funzioni di output di valori fino ad arrivare a funzioni piu’
complesse per la gestione di timer, asserzioni, stack-trace, ecc. La regola e’ che per una funzione
implementata nella classe debugger.Debug ci sia una definizione (ma non l’implementazione) anche nella classe
nodebugger.Debug in modo da poter interscambiare tali classi. Ci sono pero’ alcune eccezioni, infatti davanti a
un membro statico del tipo:</p>

<div class="highlight"><pre><code class="java"><span class="c1">//LISTATO 3: </span>
<span class="kn">package</span> <span class="n">debugger</span><span class="o">;</span> 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Debug</span> <span class="o">{</span> 
   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">long</span> <span class="nf">getFreeMemory</span><span class="o">()</span> <span class="o">{</span> 
      <span class="n">Runtime</span> <span class="n">rt</span> <span class="o">=</span> <span class="n">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">();</span> 
      <span class="k">return</span> <span class="n">rt</span><span class="o">.</span><span class="na">freeMemory</span><span class="o">();</span> 
   <span class="o">}</span> 
<span class="o">}</span></code></pre></div>

<p>che viene utilizzato nel nostro codice sorgente in questo modo:</p>

<div class="highlight"><pre><code class="java"><span class="c1">//LISTATO 4: </span>
<span class="kn">package</span> <span class="n">myprogram</span><span class="o">;</span> 
<span class="kn">import</span> <span class="nn">debugger.debug.Debug</span><span class="o">;</span> 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span> 
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMember</span><span class="o">(){</span> 
      <span class="k">if</span> <span class="o">(</span> <span class="n">allocSize</span> <span class="o">&gt;</span> <span class="n">Debug</span><span class="o">.</span><span class="na">getFreeMemory</span><span class="o">()</span> <span class="o">)</span> 
      <span class="c1">//do </span>
   <span class="o">}</span> 
<span class="o">}</span></code></pre></div>

<p>viene spontaneo chiedersi cosa succederebbe se si scambiasse la classe del package debugger con quella del
nodebugger che magari non implementa tale funzione, ma restituisce un valore di default pari a zero o ancora
peggio restituisce un puntatore null nel caso il valore di ritorno sia un oggetto. Sicuramente la soluzione
presentata in questo caso non e’ ottimale, per cui e’ necessario imporsi delle limitazioni progettuali: Non
produrre mai delle situazioni di side-effect all’interno delle funzioni membro della classe Debug, in quanto
queste potrebbero creare brutte sorprese quando viene a mancare l’implementazione che le produce durante lo
scambio dei due package. Cercare il piu’ possibile di creare funzioni membro statiche di Debug che
restituiscano void (cioe’ niente), per ovviare al caso dell’esempio nel listato 4. Quando non si puo’
rispettare la seconda raccomandazione riportare, oltre che alla definizione, anche la stessa implementazione
del metodo della classe del package debugger nel package nodebugger (anche se purtroppo in questo caso non si
ha alcun beneficio dal lato delle prestazioni): in questo modo si e’ sicuri che anche scambiando i package la
nostra funzione getFreeMemory del precedente esempio si comporti sempre nello stesso modo. Seguendo queste
raccomandazioni si dovrebbe riuscire a ovviare ai problemi derivanti dal side-effect (che comunque rimane
sempre una tecnica per la quale e’ sempre meglio valutare soluzioni alternative).</p>

<h1 id="affiniamo-la-tecnica">Affiniamo la tecnica</h1>
<p>Per perfezionare ancora meglio quanto detto sopra, ma soprattutto per capitalizzare meglio il codice che
andremo a scrivere si potrebbero definire altre due raccomandazioni: Prima di utilizzare le classi di debug,
definire un’ulteriore classe di supporto che semplicemente eredita dalla classe Debug originale:</p>

<div class="highlight"><pre><code class="java"><span class="c1">//LISTATO 5: </span>
<span class="kn">package</span> <span class="n">myprogram</span><span class="o">.</span><span class="na">debug</span><span class="o">;</span> 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyDebug</span> <span class="kd">extends</span> <span class="n">debugger</span><span class="o">.</span><span class="na">debug</span><span class="o">.</span><span class="na">Debug</span> <span class="o">{</span>
<span class="cm">/**/</span>
<span class="o">}</span></code></pre></div>

<p>Analogamente fare la stessa cosa per la classe Debug del package nodebug:</p>

<div class="highlight"><pre><code class="java"><span class="c1">//LISTATO 6: </span>
<span class="kn">package</span> <span class="n">myprogram</span><span class="o">.</span><span class="na">nodebug</span><span class="o">;</span> 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyDebug</span> <span class="kd">extends</span> <span class="n">debugger</span><span class="o">.</span><span class="na">nodebug</span><span class="o">.</span><span class="na">Debug</span> <span class="o">{</span> 
<span class="cm">/**/</span>
<span class="o">}</span></code></pre></div>

<p>Questo ci permettera’ di disabilitare tutti i debug della nostra applicazione semplicemente cambiando la
classe genitore della myprogram.debug.MyDebug con la classe debugger.nodebug.Debug.Stessa cosa vale per la
classe myprogram.nodebug.MyDebug che potra’ invece attivare tutti i debug attualmente disattivati.</p>

<p>Utilizzare, poi, all’interno delle proprie classi sempre una estensione delle MyDebug in modo tale da avere
piu’ livelli di debug indipendenti (o quasi) l’uno dall’altro. In questo modo si potranno attivare dei livelli
piuttosto che altri ed avere un output di debug piu’ chiaro da capire. Per esempio:</p>

<div class="highlight"><pre><code class="java"><span class="c1">//LISTATO 7: </span>
<span class="kn">package</span> <span class="n">myprogram</span><span class="o">.</span><span class="na">main</span><span class="o">;</span> 
<span class="c1">//Definisco dei livelli di debug class DebugLevel1 extends</span>
<span class="n">myprogram</span><span class="o">.</span><span class="na">debug</span><span class="o">.</span><span class="na">MyDebug</span> <span class="o">{</span> <span class="cm">/**/</span> <span class="o">}</span> <span class="c1">//attualmente attivo </span>
<span class="kd">class</span> <span class="nc">DebugLevel2</span> <span class="kd">extends</span> <span class="n">myprogram</span><span class="o">.</span><span class="na">nodebug</span><span class="o">.</span><span class="na">MyDebug</span> <span class="o">{</span>
<span class="cm">/**/</span>
<span class="o">}</span> 
<span class="c1">//attualmente disattivo </span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span> 
<span class="n">MyClass</span><span class="o">()</span> <span class="o">{}</span> 
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMember1</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">DebugLevel1</span><span class="o">.</span><span class="na">prt</span><span class="o">(</span><span class="s">&quot;Precondizione della funzione membro myMember1():&quot;</span><span class="o">+</span><span class="n">data</span><span class="o">);</span> 
   <span class="o">}</span> 
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMember2</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">DebugLevel2</span><span class="o">.</span><span class="na">prt</span><span class="o">(</span><span class="s">&quot;Precondizione della funzione membro myMember2(): &quot;</span><span class="o">+</span><span class="n">data</span><span class="o">);</span> 
   <span class="o">}</span> 
<span class="o">}</span></code></pre></div>

<h1 id="finalmente-il-package-debugger">Finalmente il package debugger</h1>
<p>Mantenendo le linee di progetto fin qui definite si puo’ passare all’implementazione dei vari package che
formeranno il Debugger. Teniamo a precisare che quella qui riportata e’ una soluzione di base nata sul campo ed
e’ attualmente utilizzata in diversi programmi Java da noi sviluppati, ma nonostante tutto puo’ comunque essere
ampliata e personalizzata secondo le varie esigenze. Il package principale debugger e’ suddiviso in ulteriori
quattro package: assertion, debug, noassertion, nodebug. Il motivo della scelta di separare le asserzioni dal
normale debug e’ dovuto soprattutto al peso che noi diamo all’interno del nostro codice a queste. Infatti molto
spesso ci capita di voler disabilitare ogni stampa/informazione di debug ma lasciare comunque attive le
chiamate alla classe Assert, magari anche nel codice finale che viene rilasciato. Questa scelta ci facilita le
cose in quanto la gestione dei quattro package (simmetrici due a due) e’ completamente indipendente l’uno
dall’altro. Passiamo ad analizzare le singole classi, premettendo pero’ che per approfondire ulteriormente si
puo’ sempre far riferimento alla relativa documentazione html dell’intero package (nonche’ ai sorgenti java).</p>

<h1 id="le-asserzioni">Le asserzioni</h1>
<p>All’interno del percorso debugger.assertion e debugger.noassertion troviamo le due classi ‘gemelle’ Assert,
uguali nella loro definizione ma non nella loro implementazione. Infatti la classe appartenente al package
debugger.noassertion non implementa nessuna delle cinque funzione membro. (Queste classi, proprio per il loro
ruolo all’interno del package, vengono spesso definite da noi come classi ‘fake’). I metodi principali di
Assert sono isTrue(boolean) / isTrue(boolean, String) che lanciano un’assert-fail (in pratica eseguono il
metodo prtErr) nel qual caso l’espressione booleana non sia vera. Il parametro stringa della seconda funzione
serve solo come label per riuscire ad identificarla meglio in caso questa fallisca. I corrispettivi metodi
isFalse(boolean) / isFalse(boolean, String) funzionano analogamente, ma al contrario dei precedenti, lanciano
l’assert-fail se l’espressione booleana e’ vera. La funzione prtErr(String), che tra l’altro e’ definita
private, si occupa di inviare sullo standard error i dati dell’asserzione fallita e una stampa dello stak-trace
per riuscire ad identificare meglio dove questa e’ stata lanciata. Inoltre per avvisare ulteriormente del
fallimento viene inviato un segnale acustico allo speaker del PC.Si e’ discusso molto sul fatto che i metodi
isTrue e isFalse dovessero o meno lanciare un’eccezione in modo da obbligare il relativo catch ed avere una
gestione al livello superiore dell’asserzione fallita. Alla fine si e’ arrivati alla conclusione che la cosa
avrebbe complicato maggiormente la gestione (soprattutto quella della cosi’ detta classe ‘fake’) ed i benefici,
almeno nel nostro caso, non erano cosi’ meritevoli. Comunque se si ritiene indispensabile questa caratteristica
si puo’ sempre aggiungere ulteriori metodi che la implementino.</p>

<h1 id="il-debug">Il Debug</h1>
<p>I restanti due package debugger.debug e debugger.nodebug contengono rispettivamente la classe Debug. I
metodi implementati sono di vario tipo a seconda della gestione che si vuole fare: si va dalla classica
formattazione dei dati da inviare nello standard output (si vedano i vari metodi prt e prtValue) alla gestione
piu’ complessa dei timer per cronometrare alcune parti del codice. Inoltre e’ stato inserito un metodo
isEnable() che ritorna true nel caso della classe debugger.debug.Debug e false nel caso della corrispettiva
classe ‘fake’ debugger.nodebug.Debug, in modo da poter conoscere se l’attuale classe statica a cui si fa
riferimento ha il debugger attivo oppure no. E’ stata aggiunta anche la possibilita’ di avere un salvataggio su
file di tutti i dati inviati allo standard output/error tramite una specie di log (attenzione questo non e’ da
confondere con la gestione dei log, che e’ tutta un’altra cosa). La peculiarita’ di quest’ultima caratteristica
e’ che il log e’ attivo/disattivo allo stesso momento per tutte le classi che ereditano da
debugger.debug.Debug. Questo vuol dire che se io ho due classi DebugLevel1 e DebugLevel2 che entrambi derivano
da tale classe (debug attivo per tutti e due i livelli) e attivo il log sul DebugLevel1 lo attivera’
indirettamente anche su il DebugLevel2. Per finire ci sono anche alcuni metodi che ritornano un valore (per
esempio getFreeMemory() e getTotalMemory(), che servono rispettivamente per avere la quantita’ di memoria
libera e totale disponibile per il processo corrente). Questi, per il motivo citato nella raccomandazione n. 3,
sono stati mantenuti uguali anche nella relativa classe ‘fake’.
#L’utilizzo
Vediamo un esempio di utilizzo del package debugger:</p>

<div class="highlight"><pre><code class="java"><span class="c1">//LISTATO 8: </span>
<span class="kn">package</span> <span class="n">myprogram</span><span class="o">.</span><span class="na">nodebug</span><span class="o">;</span> 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyDebug</span> <span class="kd">extends</span> <span class="n">debugger</span><span class="o">.</span><span class="na">nodebug</span><span class="o">.</span><span class="na">Debug</span> <span class="o">{</span> 
<span class="cm">/*Inserire qui eventuali estensioni */</span> 
<span class="o">}</span> 
<span class="c1">//LISTATO 9: </span>
<span class="kn">package</span> <span class="n">myprogram</span><span class="o">.</span><span class="na">debug</span><span class="o">;</span> 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyDebug</span> <span class="kd">extends</span> <span class="n">debugger</span><span class="o">.</span><span class="na">debug</span><span class="o">.</span><span class="na">Debug</span> <span class="o">{</span> 
<span class="cm">/*Inserire qui eventuali estensioni */</span> 
<span class="o">}</span> 
<span class="c1">//LISTATO 10: package myprogram.noassertion;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyAssert</span> <span class="kd">extends</span> <span class="n">debugger</span><span class="o">.</span><span class="na">noassertion</span><span class="o">.</span><span class="na">Assert</span> <span class="o">{</span> 
   <span class="cm">/*Inserire qui eventuali estensioni */</span> 
<span class="o">}</span>
<span class="c1">//LISTATO 11: </span>
<span class="kn">package</span> <span class="n">myprogram</span><span class="o">.</span><span class="na">assertion</span><span class="o">;</span> 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyAssert</span> <span class="kd">extends</span> <span class="n">debugger</span><span class="o">.</span><span class="na">assertion</span><span class="o">.</span><span class="na">Assert</span> <span class="o">{</span>
<span class="cm">/*Inserire qui eventuali estensioni */</span> 
<span class="o">}</span> 
<span class="c1">//LISTATO 12: package myprogram.main; //Definisco dei livelli di</span>
<span class="n">debug</span> <span class="kd">class</span> <span class="nc">DebugLevel1</span> <span class="kd">extends</span> <span class="n">myprogram</span><span class="o">.</span><span class="na">debug</span><span class="o">.</span><span class="na">MyDebug</span> <span class="o">{</span> <span class="cm">/**/</span><span class="o">}</span> 
<span class="c1">//attualmente attivo </span>
<span class="kd">class</span> <span class="nc">DebugLevel2</span> <span class="kd">extends</span> <span class="n">myprogram</span><span class="o">.</span><span class="na">nodebug</span><span class="o">.</span><span class="na">MyDebug</span> <span class="o">{</span> <span class="cm">/**/</span><span class="o">}</span> 
<span class="c1">//attualmente disattivo </span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyClass</span> <span class="o">{</span>
<span class="c1">//Definisco dei livelli di asserzioni </span>
<span class="kd">class</span> <span class="nc">AssertLevel1</span> <span class="kd">extends</span> <span class="n">myprogram</span><span class="o">.</span><span class="na">assertion</span><span class="o">.</span><span class="na">MyAssert</span> <span class="o">{</span> <span class="cm">/**/</span> <span class="o">}</span> <span class="c1">//attualmente attivo</span>
<span class="kd">class</span> <span class="nc">AssertLevel2</span> <span class="kd">extends</span> <span class="n">myprogram</span><span class="o">.</span><span class="na">noassertion</span><span class="o">.</span><span class="na">MyAssert</span> <span class="o">{</span> <span class="cm">/**/</span> <span class="o">}</span> 
<span class="kd">private</span> <span class="kt">int</span> <span class="n">data</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> 
<span class="n">MyClass</span><span class="o">()</span> <span class="o">{}</span> 
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMember1</span><span class="o">()</span> <span class="o">{</span> 
      <span class="n">AssertLevel1</span><span class="o">.</span><span class="na">isTrue</span><span class="o">(</span><span class="n">data</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">,</span><span class="s">&quot;Precondizione della funzione membro myMember1()&quot;</span><span class="o">);</span> 
      <span class="kt">int</span> <span class="n">val</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> 
      <span class="n">DebugLevel1</span><span class="o">.</span><span class="na">prtValue</span><span class="o">(</span><span class="s">&quot;val&quot;</span><span class="o">,</span><span class="n">val</span><span class="o">);</span> 
      <span class="n">DebugLevel1</span><span class="o">.</span><span class="na">startTimer</span><span class="o">(</span><span class="s">&quot;MyTimer1&quot;</span><span class="o">);</span> 
      <span class="n">DebugLevel1</span><span class="o">.</span><span class="na">prtTimer</span><span class="o">(</span><span class="s">&quot;MyTimer1&quot;</span><span class="o">);</span>
      <span class="n">DebugLevel1</span><span class="o">.</span><span class="na">stopTimer</span><span class="o">(</span><span class="s">&quot;MyTimer1&quot;</span><span class="o">);</span> 
   <span class="o">}</span> 
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">myMember2</span><span class="o">()</span> <span class="o">{</span> 
      <span class="n">AssertLevel2</span><span class="o">.</span><span class="na">isTrue</span><span class="o">(</span><span class="n">data</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">,</span> <span class="s">&quot;Precondizione della funzione membro myMember2()&quot;</span><span class="o">);</span> 
      <span class="n">DebugLevel2</span><span class="o">.</span><span class="na">prt</span><span class="o">(</span><span class="s">&quot;Apertura del database&quot;</span><span class="o">);</span> 
   <span class="o">}</span> 
<span class="o">}</span></code></pre></div>

<h1 id="conclusione">Conclusione</h1>
<p>Come si puo’ notare con questo sistema siamo riusciti ad ottenere un debugger che risponde alle
caratteristiche che ci eravamo prefissati ed ha un utilizzo abbastanza semplice ma soprattutto immediato.
Sicuramente le migliorie che si possono fare sono moltissime, soprattutto la personalizzazione e adattamento
alle proprie abitudini durante la stesura del codice. Per fare questo basta ampliare le classi che ereditano da
quelle base del package debugger mantenendo sempre come riferimento le linee guida elencate poc’anzi.Per
eventuali chiarimenti, critiche e consigli contattateci direttamente via e-mail. BUON DEBUG!</p>


        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
      
        <a href="http://mcaliman.github.io/articles/mokabyte-udp/" class="btn" title="Java e il protocollo UDP">Next article</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    
<div class="google-ads" style="margin:10px 0;">
	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- blog -->
	<ins class="adsbygoogle"
	     style="display:inline-block;width:728px;height:90px"
	     data-ad-client="ca-pub-5121145090824526"
	     data-ad-slot="5496776881"></ins>
	<script>
	(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
</div>

<span>&copy; 2014 Massimo Caliman. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/so-simple/">So Simple Theme</a>.</span>
<div class="social-icons">
	<a href="http://twitter.com/mcaliman" title="Massimo Caliman on Twitter" target="_blank"><i class="icon-twitter icon-2x"></i></a>
	
	<a href="https://plus.google.com/+MassimoCaliman" title="Massimo Caliman on Google+" target="_blank"><i class="icon-google-plus icon-2x"></i></a>
	<a href="http://linkedin.com/in/mcaliman" title="Massimo Caliman on LinkedIn" target="_blank"><i class="icon-linkedin icon-2x"></i></a>
	
	
	
	<a href="http://github.com/mcaliman" title="Massimo Caliman on Github" target="_blank"><i class="icon-github icon-2x"></i></a>
	
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://mcaliman.github.io/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://mcaliman.github.io/assets/js/scripts.min.js"></script>

<!-- Jekyll Simple Search option -->
<script>
  $(document).ready(function() {
      $('.search-field').simpleJekyllSearch({
          jsonFile : 'http://mcaliman.github.io/search.json',
          searchResults : '.search-results',
          template : '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>',
          noResults: '<p>Nothing found.</p>'
        });
  });

  (function( $, window, undefined ) {
    
     var bs = {
          close: $(".icon-remove-sign"),
          searchform: $(".search-form"),
          canvas: $("body"),
          dothis: $('.dosearch')
      };
    
    bs.dothis.on('click', function() {
      $('.search-wrapper').css({ display: "block" });
      bs.searchform.toggleClass('active');
      bs.searchform.find('input').focus();
      bs.canvas.toggleClass('search-overlay');
    });
    
      bs.close.on('click', function() {
        $('.search-wrapper').removeAttr( 'style' );
        bs.searchform.toggleClass('active');
        bs.canvas.removeClass('search-overlay');
    });
  })( jQuery, window );
</script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-53230757-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

	        

</body>
</html>
